<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.alibaba.alimei.dao.ITeamSyncMapper">

    <resultMap id="UserTeamViewMap" type="com.alibaba.alimei.dao.vo.sync.UserTeamView">
        <result column="user_id" property="userId" />

        <result column="user_gmt_modified" property="userGmtModified" />
        <result column="user_team_gmt_modified" property="gmtModified" />
        <result column="user_status" property="userStatus"/>
        <result column="user_team_status" property="userTeamStatus" />

        <result column="id" property="id" />
        <result column="description" property="description" />
        <result column="sort" property="sort" />
        <result column="email" property="email" />
        <result column="name" property="name" />
        <result column="type" property="type" />
        <result column="biz_status" property="bizStatus" />
        <result column="parent_id" property="parentId" />
        <result column="owner_id" property="ownerId" />
        <result column="domain_id" property="domainId" />
        <result column="status" property="status" />
        <result column="gmt_create" property="gmtCreate" />
        <result column="gmt_modified" property="gmtModified" />
        <result column="app_name" property="appName" />
        <result column="app_parent" property="appParent" />
    </resultMap>

    <select id="listTeamChange"  resultType="com.alibaba.alimei.dao.vo.sync.UserTeamView">
        select
                    a.gmt_modified as user_gmt_modified,
                    a.status as user_status,
                    a.id as user_id,
                    b.status as user_team_status,
                    b.gmt_modified as user_team_modified,
                    c.* from user a , user_team b , team c

        where a.id=b.user_id and b.team_id=c.id
        and c.app_name = #{appName}
        and a.account_id=#{accountId}
        and (
        a.gmt_modified>#{syncDate} or b.gmt_modified >#{syncDate} or c.gmt_modified>#{syncDate}
        )

    </select>


</mapper>